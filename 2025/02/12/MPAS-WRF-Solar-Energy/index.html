

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=light>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="wpsze">
  <meta name="keywords" content="">
  
    <meta name="description" content="太陽輻射  陽光從太陽到達地球表面的過程中，有部分直接穿越大氣層到達地面，稱為太陽直接輻射。 其餘的太陽光因被大氣中的空氣分子、水蒸氣及塵粒所散射或反射，而以間接的路徑抵達地面，稱為太陽漫射輻射。 總太陽輻射是指所有到達地面的太陽光，即太陽直接輻射及太陽漫射輻射的總和。 Units: W&#x2F;m2 在晴天，海平面上的最大正常全天空日射約為 \(1000 W&#x2F;m^{2}\)  太陽能是最充裕的再生能源，">
<meta property="og:type" content="article">
<meta property="og:title" content="MPAS | WRF | Solar Energy">
<meta property="og:url" content="https://waipangsze.github.io/2025/02/12/MPAS-WRF-Solar-Energy/index.html">
<meta property="og:site_name" content="wpsze">
<meta property="og:description" content="太陽輻射  陽光從太陽到達地球表面的過程中，有部分直接穿越大氣層到達地面，稱為太陽直接輻射。 其餘的太陽光因被大氣中的空氣分子、水蒸氣及塵粒所散射或反射，而以間接的路徑抵達地面，稱為太陽漫射輻射。 總太陽輻射是指所有到達地面的太陽光，即太陽直接輻射及太陽漫射輻射的總和。 Units: W&#x2F;m2 在晴天，海平面上的最大正常全天空日射約為 \(1000 W&#x2F;m^{2}\)  太陽能是最充裕的再生能源，">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.imgur.com/gXPusJ6.png">
<meta property="article:published_time" content="2025-02-12T10:02:00.000Z">
<meta property="article:modified_time" content="2025-02-20T06:05:25.277Z">
<meta property="article:author" content="wpsze">
<meta property="article:tag" content="MPAS">
<meta property="article:tag" content="NWP">
<meta property="article:tag" content="WRF">
<meta property="article:tag" content="ERA5">
<meta property="article:tag" content="GFS">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://i.imgur.com/gXPusJ6.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>MPAS | WRF | Solar Energy - wpsze</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"waipangsze.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":{"measurement_id":"F7MK-FcxSomhtc1N3hIUDA"},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  
    <!-- Google tag (gtag.js) -->
    <script async>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript("https://www.googletagmanager.com/gtag/js?id=F7MK-FcxSomhtc1N3hIUDA", function() {
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag('js', new Date());
          gtag('config', 'F7MK-FcxSomhtc1N3hIUDA');
        });
      }
    </script>
  

  

  

  



  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>wpsze</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/" target="_self">
                <i class="iconfont icon-link-fill"></i>
                <span>Links</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/bookmark/" target="_self">
                <i class="iconfont icon-bookmark"></i>
                <span>Bookmarks</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-books"></i>
                <span>Docs</span>
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Physics/" target="_self">
                    <i class="iconfont icon-plan"></i>
                    <span>Physics</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Maths/" target="_self">
                    <i class="iconfont icon-plan"></i>
                    <span>Maths</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/CFD/" target="_self">
                    <i class="iconfont icon-plan"></i>
                    <span>CFD</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/ML/" target="_self">
                    <i class="iconfont icon-plan"></i>
                    <span>ML</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Meteorology/" target="_self">
                    <i class="iconfont icon-plan"></i>
                    <span>Meteorology</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/MPAS/" target="_self">
                    <i class="iconfont icon-plan"></i>
                    <span>MPAS</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/monitor/" target="_self">
                    
                    <span>Real Time Monitoring</span>
                  </a>
                
              </div>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>About Me</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://i.imgur.com/gXPusJ6.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="MPAS | WRF | Solar Energy"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-02-12 18:02" pubdate>
          February 12, 2025 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          1.3k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          11 mins
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> views
        </span>
        

      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">MPAS | WRF | Solar Energy</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="太陽輻射">太陽輻射</h1>
<ul>
<li>陽光從太陽到達地球表面的過程中，有部分直接穿越大氣層到達地面，稱為<strong>太陽直接輻射</strong>。</li>
<li>其餘的太陽光因被大氣中的空氣分子、水蒸氣及塵粒所散射或反射，而以間接的路徑抵達地面，稱為<strong>太陽漫射輻射</strong>。</li>
<li><strong>總太陽輻射</strong>是指所有到達地面的太陽光，即太陽直接輻射及太陽漫射輻射的總和。</li>
<li>Units: W/m2</li>
<li>在晴天，海平面上的最大正常全天空日射約為 <span class="math inline">\(1000 W/m^{2}\)</span></li>
</ul>
<p>太陽能是最充裕的再生能源，故此有需要多加了解它的強度。科學界普遍認為如果我們能收集所有到達地面的太陽能一個小時，便能滿足全球一年的能源需要。為減少對石化燃料的依賴，開發高效的太陽能技術，並將太陽能轉化為可用電能，已迅速成為全球為未來發展清潔能源的方向。太陽直接輻射及太陽漫射輻射的資料有助設計及製造高能源效益的裝置，減少對大型空氣調節設備，如冷氣機或暖氣機等的依賴。</p>
<p>香港天文台自一九五八年開始量度總太陽輻射，現時天文台分別在京士柏氣象站和西貢的滘西洲太陽輻射站量度太陽直接輻射及太陽漫射輻射數據。太陽漫射輻射是利用一部能遮蔽太陽直射的總日射表來量度，而太陽直接輻射則利用安裝在太陽自動追蹤裝置上，並對準太陽的直接日射表來量度。</p>
<ul>
<li>Global Horizontal Irradiance (GHI, Units: W/m2)
<ul>
<li>Global horizontal irradiance is the total solar radiation per unit area measured at a <strong>horizontal surface on the earth</strong>. It is typically presented in W/m2 and can be broken down into two components: direct normal irradiance (DNI) and diffuse horizontal irradiance (DHI)</li>
<li>The solar zenith angle of the Sun z</li>
<li><span class="math display">\[ \text{GHI} = \text{DHI} + \text{DNI} \times \cos (z) \]</span></li>
</ul></li>
<li>Direct Normal Irradiance (DNI)</li>
<li>Diffuse Horizontal Irradiance (DIF or DHI)</li>
<li>Clear-Sky Irradiance
<ul>
<li>Irradiance calculated prior to taking cloud cover into consideration. Clear-sky irradiance is calculated based on solar geometry, elevation, water vapor, ozone, albedo, aerosol optical depth, wind speed and temperature.</li>
<li>Clear-sky irradiance data is helpful when using solar resource data to analyze PV system performance. It helps in differentiating between cloudy conditions and other circumstances that may be affecting plant performance, such as equipment failure or losses due to snow cover or soiling.</li>
</ul></li>
</ul>
<div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="https://i.imgur.com/gXPusJ6.png" srcset="/img/loading.gif" lazyload /></div><div class="group-image-wrap"><img src="https://i.imgur.com/fAEkJgV.png" srcset="/img/loading.gif" lazyload /></div></div><div class="group-image-row"></div></div>
<p><img src="https://i.imgur.com/GlRJZm8.png" srcset="/img/loading.gif" lazyload /></p>
<h2 id="τhe-absorption-bands-of-earths-atmosphere">Τhe absorption bands of Earth's atmosphere</h2>
<p>Τhe absorption bands of Earth's atmosphere (grey colour) delimit its atmospheric windows (middle panel) and the effect they have on both downgoing solar radiation and upgoing thermal radiation emitted near the surface is shown in the top panel. The individual absorption spectra of major greenhouse gases plus Rayleigh scattering are shown in the lower panel.</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/55/Atmospheric_Transmission.svg/614px-Atmospheric_Transmission.svg.png" srcset="/img/loading.gif" lazyload /></p>
<h1 id="ecmwf-ifs-era5-ssrd">ECMWF | IFS | ERA5 : SSRD</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://confluence.ecmwf.int/pages/viewpage.action?pageId=111155332">What are the definitions of the radiation fields?</a>
<ul>
<li><code>"Surface solar radiation downwards" (SSRD)</code> is the incident solar (shortwave) radiation and <code>"surface solar radiation" (SSR)</code> is the net solar radiation (the fraction of solar radiation not reflected by the surface). <code>"Surface net solar radiation, clear sky" (SSRC)</code> is a hypothetical field of net solar radiation assuming no clouds.</li>
<li><code>"Surface thermal radiation downwards" (STRD)</code> is the incident thermal (longwave) radiation and <code>"surface thermal radiation" (STR)</code> is the net thermal radiation. <code>"Surface net thermal radiation, clear sky" (STRC)</code> is a hypothetical field of net thermal radiation assuming no clouds.</li>
<li>"Top solar radiation" is the net solar (shortwave) radiation at the top of the atmosphere (TOA). "Top net solar radiation, clear sky" is a hypothetical field assuming no clouds.</li>
<li>"Top thermal radiation" is the net thermal (longwave) radiation at the top of the atmosphere. "Top net thermal radiation, clear sky" is a hypothetical field assuming no clouds.</li>
</ul></li>
</ul>
<p><strong>Additional details on radiation parameters can be found here</strong>: <a target="_blank" rel="noopener" href="https://www.ecmwf.int/sites/default/files/elibrary/2015/18490-radiation-quantities-ecmwf-model-and-mars.pdf">Radiation-quantities-ecmwf-model-and-mars.pdf (document correct as of Cycle 41R1)</a></p>
<h2 id="details-of-the-variable">Details of the Variable:</h2>
<ul>
<li><strong>Name</strong>: Surface Solar Radiation Downwards (SSRD)</li>
<li><strong>GRIB Parameter ID</strong>: 169 (in GRIB format, as used by ECMWF)</li>
<li><strong>Units</strong>: J/m² (accumulated over a time step, typically hourly or 3-hourly depending on the dataset)</li>
<li><strong>Description</strong>: This is the amount of solar radiation (shortwave) reaching the surface of the Earth, integrated over a specified time period. To convert it to an average irradiance in W/m², you divide the accumulated value (J/m²) by the time step in seconds (e.g., 3600 seconds for hourly data).</li>
</ul>
<h3 id="notes">Notes:</h3>
<ol type="1">
<li><strong>Availability</strong>: SSRD is available in many ECMWF IFS outputs, including the high-resolution deterministic forecast (HRES), ensemble forecasts (ENS), and reanalysis products like ERA5.</li>
<li><strong>Direct vs. Diffuse</strong>: SSRD includes both direct and diffuse radiation. If you specifically need <strong>Direct Normal Irradiance (DNI)</strong> or diffuse components, these are not directly provided as separate variables in standard IFS outputs. However, they can sometimes be derived using additional post-processing or from specialized datasets (e.g., CAMS radiation services, which use IFS data).</li>
</ol>
<h3 id="practical-example">Practical Example:</h3>
<p>If you retrieve SSRD from an hourly ERA5 dataset and the value is 720,000 J/m² over a 1-hour period, the average irradiance is:</p>
<p><span class="math display">\[
720,000 \text{J/m² ÷} 3600 \text{s} = 200 \text{W/m²}
\]</span></p>
<h2 id="radiation-quantities">** Radiation Quantities</h2>
<h3 id="conventions">Conventions</h3>
<p>The following conventions are employed in the storage of fluxes by the ECMWF model:</p>
<ol type="1">
<li>Archived fluxes are either <strong>downward</strong> or <strong>net</strong>. Energy entering the Earth's atmosphere-surface system is taken as a positive quantity, and therefore downward fluxes are positive and net flux refers to the downward flux minus the upward flux. To obtain the upward flux (<span class="math inline">\(F^{up}\)</span>) from the downward flux (<span class="math inline">\(F^{dn}\)</span>) and net flux (<span class="math inline">\(F^{net}\)</span>), use <span class="math inline">\(F^{up} = F^{dn} - F^{net}\)</span>.</li>
<li>Physical fluxes archived by the ECMWF model are <strong>accumulated</strong> since the start of the relevant forecast, and therefore in <strong>units of J m⁻² (or W m⁻² s)</strong>. Thus, a daily mean (in W m⁻²) is obtained by retrieving the accumulated fluxes at <span class="math inline">\(t_1 = t\)</span> and <span class="math inline">\(t_2 = t + 24\)</span> hours (where <span class="math inline">\(t\)</span> is the time of the start of the average), taking the difference and dividing by <span class="math inline">\(86400\)</span>, the number of seconds in a day.</li>
<li><strong>Clear-sky</strong> quantities are computed for exactly the same atmospheric conditions of temperature, humidity, ozone, trace gases and aerosol, but assuming that <em>the clouds are not there</em>.
<ol type="1">
<li><strong>Clear-sky irradiance</strong> represents the solar energy reaching the Earth's surface at a specific location and time, assuming there are no clouds present. It's the <em>theoretical maximum irradiance</em>, which is reduced by cloud cover in real-world conditions. Clear-sky irradiance is influenced by factors such as the Earth-Sun distance and their relative positions.</li>
<li><strong>All-sky irradiance</strong> considers all scattering and absorption by gases, aerosols, and clouds. It is another name for <strong>"global horizontal irradiance" (GHI)</strong>, which is the total solar irradiance (direct plus diffuse) incident on a horizontal surface. Semi-empirical models produce all-sky irradiance as a final output, accounting for all atmospheric factors, including cloud cover.</li>
</ol></li>
<li><strong>Solar</strong> or <strong>short-wave</strong> refers to radiation emitted by the Sun, then scattered, absorbed or transmitted by the atmosphere and reflected or absorbed by the surface. It corresponds roughly to the <span class="math inline">\(0.2-4 \mu m\)</span> or <span class="math inline">\(50,000–2600 cm^{-1}\)</span> part of the spectrum. Thermal, <strong>terrestrial</strong> or <strong>long-wave</strong> refers to radiation emitted and absorbed by the surface or by gases, clouds and particles within the atmosphere. It corresponds roughly to the <span class="math inline">\(4–100 \mu m\)</span> or <span class="math inline">\(2600–10 cm^{-1}\)</span> part of the spectrum. Note that there is some spectral overlap between the two, which is fully represented in the model, so the division between solar and thermal radiation should not be thought of as simply radiation with a wavelength shorter or longer than <span class="math inline">\(4 \mu m\)</span>, but rather as radiation originating from the sun versus originating from emission by the Earth or its atmosphere.</li>
</ol>
<div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="https://i.imgur.com/pjyvEAB.png" srcset="/img/loading.gif" lazyload /></div><div class="group-image-wrap"><img src="https://i.imgur.com/cHjHFhO.png" srcset="/img/loading.gif" lazyload /></div></div><div class="group-image-row"><div class="group-image-wrap"><img src="https://i.imgur.com/e49unoQ.png" srcset="/img/loading.gif" lazyload /></div><div class="group-image-wrap"><img src="https://i.imgur.com/5NVZC7h.png" srcset="/img/loading.gif" lazyload /></div></div><div class="group-image-row"></div></div>
<h3 id="earths-energy-budget-diagram">Earth's Energy Budget Diagram</h3>
<p>In its orbit around the Sun, the part of Earth that faces the Sun receives approximately <span class="math inline">\(1,371 W/m2\)</span> of energy. Averaged over the area of Earth's full sphere, the energy from sunlight coming to the top of the atmosphere is approximately <span class="math inline">\(340 W/m2\)</span>.</p>
<figure>
<img src="https://i.imgur.com/QhR1rAk.png" srcset="/img/loading.gif" lazyload alt="Scientists have been able to document global incoming and outgoing radiation averages, which provide an understanding of how energy is absorbed, reflected, and released by Earth&#39;s atmosphere, clouds, and surface. The numbers in parentheses represent the uncertainty range, or variability, associated with these averages. IPCC, WG1, 2021" width="500" /><figcaption>Scientists have been able to document global incoming and outgoing radiation averages, which provide an understanding of how energy is absorbed, reflected, and released by Earth's atmosphere, clouds, and surface. The numbers in parentheses represent the uncertainty range, or variability, associated with these averages. IPCC, WG1, 2021</figcaption>
</figure>
<hr />
<h1 id="gfs-dswrf">GFS: DSWRF</h1>
<p>The Global Forecast System (GFS) model is used to predict solar power generation by forecasting various weather parameters, including downward short-wave radiation flux (DSWRF). The GFS model is run daily at 00, 06, 12, and 18 UTC, providing hourly forecasts for up to 120 hours.</p>
<p>Here's how the GFS model and DSWRF are used in solar energy predictions:</p>
<ul>
<li><strong>DSWRF Parameter:</strong> GFS uses the DSWRF parameter, labeled as a "0-3 hour ave".</li>
<li><strong>NWP Variables:</strong> The GFS model uses nine Numerical Weather Prediction (NWP) variables to predict solar generation at a site. These include shortwave radiation, cloud cover, air temperature, wind speed, and precipitation.</li>
<li><strong>Inputs for Models:</strong> The parameters derived from GFS are used as inputs for solar irradiance models.</li>
<li><strong>Calibration:</strong> GFS solar irradiation forecasts can be calibrated to improve accuracy.</li>
<li><strong>Bias Correction:</strong> Correcting cloud cover bias in GFS-derived cloud forecasts can improve energy forecasts.</li>
</ul>
<hr />
<h1 id="wrf">WRF</h1>
<p>WRF can output the following variables that meet your need:</p>
<ul>
<li><code>GHI</code> should be in the output. It is a variable called <code>SWDOWN</code>. <a target="_blank" rel="noopener" href="https://forum.mmm.ucar.edu/threads/solar_diagnostics-output-variables-not-showing-in-wrfout.10871/">link</a>
<ul>
<li>The direct normal irradiance (<code>DNI</code>) and the diffuse irradiance are exposed via the Registry. You need to edit the file <code>Registry.EM_COMMON</code> and add the variables <code>SWDDNI</code> and <code>SWDDIF</code> to the WRF output by adding a <code>h</code> in the IO part of the table for these variables.</li>
<li>Please <strong>recompile WRF</strong> after you change Registry. Remember to type <code>./clean -a</code> before recompile the codes.</li>
</ul></li>
<li><code>SWDDIR</code> "Shortwave surface downward direct irradiance" "W m-2" ""</li>
<li><code>SWDDIF</code> "Shortwave surface downward diffuse irradiance" "W m-2" ""</li>
</ul>
<h1 id="wrf-solar">WRF-Solar</h1>
<ul>
<li><a target="_blank" rel="noopener" href="https://ral.ucar.edu/solutions/products/wrf-solar" class="uri">https://ral.ucar.edu/solutions/products/wrf-solar</a></li>
<li><a target="_blank" rel="noopener" href="https://forum.mmm.ucar.edu/threads/problem-with-wrf-solar-output-swddni-and-swddif.11345/">Problem With WRF-Solar Output SWDDNI and SWDDIF.</a></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs Registry.EM_Common">state real swddir ij misc 1 - rhd &quot;SWDDIR&quot; &quot;Shortwave surface downward direct irradiance&quot; &quot;W m-2&quot; &quot;&quot;<br>state real swddir2 ij misc 1 - rhd &quot;SWDDIR2&quot; &quot;Shortwave surface downward direct irradiance from FARMS&quot; &quot;W m-2&quot; &quot;&quot;<br>state real swddirc ij misc 1 - rhd &quot;SWDDIRC&quot; &quot;Clear-sky Shortwave surface downward direct irradiance&quot; &quot;W m-2&quot; &quot;&quot;<br>state real swddni ij misc 1 - rhd &quot;SWDDNI&quot; &quot;Shortwave surface downward direct normal irradiance&quot; &quot;W m-2&quot; &quot;&quot;<br>state real swddni2 ij misc 1 - rhd &quot;SWDDNI2&quot; &quot;Shortwave surface downward direct normal irradiance from FARMS&quot; &quot;W m-2&quot; &quot;&quot;<br>state real swddnic ij misc 1 - rhd &quot;SWDDNIC&quot; &quot;Clear-sky Shortwave surface downward direct normal irradiance&quot; &quot;W m-2&quot; &quot;&quot;<br>state real swddnic2 ij misc 1 - rhd &quot;SWDDNIC2&quot; &quot;Clear-sky Shortwave surface downward direct normal irradiance from FARMS&quot; &quot;W/m^2&quot; &quot;&quot;<br>state real swddif ij misc 1 - rhd &quot;SWDDIF&quot; &quot;Shortwave surface downward diffuse irradiance&quot; &quot;W m-2&quot; &quot;&quot;<br>state real swddif2 ij misc 1 - rhd &quot;SWDDIF2&quot; &quot;Shortwave surface downward diffuse irradiance from FARMS&quot; &quot;W m-2&quot; &quot;&quot;<br></code></pre></td></tr></table></figure>
<ul>
<li>雲和氣溶膠對太陽輻射的模擬影響最大，在簡單的WRF模式中，要充分考慮氣溶膠的化學過程，導致陰雨天太陽輻射的不良可信度散射，可用性不高。</li>
<li>WRF-SOLAR積分模式考慮了氣溶膠對輻射的回饋和淺積分雲對輻射的回饋，很大程度上提高了太陽輻射的得分。</li>
<li>WRF-Solar可以輸出直接輻射（直接法向輻照度，DNI）和散射輻射（漫射輻照度，DNI）。</li>
<li>WRF-4.2以後的版本改進了相關的實體參數化方案，官方建議使用4.2.2或以上的版本。</li>
</ul>
<h1 id="mpas">MPAS</h1>
<ul>
<li><strong>MPAS v8.0.0</strong></li>
<li>In ./src/core_atmosphere/physics, added the variables swddir, swddni, and swddif. All three variables are output from rrtmg_swrad and input to the updated Noah land surface scheme. <a target="_blank" rel="noopener" href="https://github.com/MPAS-Dev/MPAS-Model/commit/54d934448a62f65971218bd554e7db5343b7c750">Commit 54d9344</a></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs src/core_atmosphere/Registry.xml">&lt;var name=&quot;swddir&quot; type=&quot;real&quot; dimensions=&quot;nCells Time&quot; units=&quot;W m^&#123;-2&#125;&quot;<br>        description=&quot;shortwave surface downward direct irradiance&quot;/&gt;<br><br>&lt;var name=&quot;swddni&quot; type=&quot;real&quot; dimensions=&quot;nCells Time&quot; units=&quot;W m^&#123;-2&#125;&quot;<br>        description=&quot;shortwave surface downward direct normal irradiance&quot;/&gt;<br><br>&lt;var name=&quot;swddif&quot; type=&quot;real&quot; dimensions=&quot;nCells Time&quot; units=&quot;W m^&#123;-2&#125;&quot;<br>        description=&quot;shortwave surface downward diffuse irradiance&quot;/&gt;<br></code></pre></td></tr></table></figure>
<h1 id="references">References</h1>
<ol type="1">
<li><a target="_blank" rel="noopener" href="https://www.hko.gov.hk/tc/wxinfo/ts/display_element_solar.htm">太陽輻射量的二十四小時時間序列 | HKO</a></li>
<li><a target="_blank" rel="noopener" href="https://www.hko.gov.hk/tc/radiation/tidbit/201003/solar.htm">輻射小知識 - 太陽輻射 | HKO</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cma.gov.cn/zfxxgk/gknr/flfgbz/bz/202209/P020220921561224172396.pdf">中华人民共和国国家标准 | 太阳总辐射辐照量划分 | 2014</a></li>
<li><a target="_blank" rel="noopener" href="https://www.liuchunhua.me/post/industry/utility_wrfonaws/wrfonaws/">[能源] WRF on AWS | 2021</a></li>
<li><a target="_blank" rel="noopener" href="https://www.nusc.gov.tw/share/file/information/fl-Tg5gcH6VoFxiLPkPRGA__.pdf">行政院原子能委員會委託研究計畫研究報告 | 2016</a></li>
<li><a target="_blank" rel="noopener" href="https://epjournal.csee.org.cn/tyn/cn/article/pdf/preview/10.19911/j.1003-0417.tyn20220121.02.pdf">太阳辐射预报方法分类与评述 | 2023</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/557953099">光伏发电预测——WRF-Solar</a></li>
<li><a target="_blank" rel="noopener" href="https://solar-energy-connection.com/what-is-the-clear-sky-irradiance/">What is the clear sky irradiance?</a></li>
</ol>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/MPAS/" class="category-chain-item">MPAS</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/MPAS/" class="print-no-link">#MPAS</a>
      
        <a href="/tags/NWP/" class="print-no-link">#NWP</a>
      
        <a href="/tags/WRF/" class="print-no-link">#WRF</a>
      
        <a href="/tags/ERA5/" class="print-no-link">#ERA5</a>
      
        <a href="/tags/GFS/" class="print-no-link">#GFS</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>MPAS | WRF | Solar Energy</div>
      <div>https://waipangsze.github.io/2025/02/12/MPAS-WRF-Solar-Energy/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>wpsze</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>February 12, 2025</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Updated on</div>
          <div>February 20, 2025</div>
        </div>
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/02/14/MPAS-ERA5-Update-SST-and-sea-ice-fraction/" title="MPAS | ERA5| Update SST and sea-ice fraction">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">MPAS | ERA5| Update SST and sea-ice fraction</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/02/11/MPAS-Physics-and-Physics-Configurations/" title="MPAS | Physics and Physics Configurations, Profiling computing time">
                        <span class="hidden-mobile">MPAS | Physics and Physics Configurations, Profiling computing time</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  





  <script>
  Fluid.utils.createScript('https://lib.baomitu.com/mermaid/8.14.0/mermaid.min.js', function() {
    mermaid.initialize({"theme":"default"});

    Fluid.utils.listenDOMLoaded(function() {
      Fluid.events.registerRefreshCallback(function() {
        if ('mermaid' in window) {
          mermaid.init();
        }
      });
    });
  });
</script>






<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9HL36SZ28R"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9HL36SZ28R');
</script>

    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">

  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  

  <span id="sitetime"></span>
  <script language=javascript>
    function siteTime(){
      window.setTimeout("siteTime()", 1000);
      var seconds = 1000;
      var minutes = seconds * 60;
      var hours = minutes * 60;
      var days = hours * 24;
      var years = days * 365;
      var today = new Date();
      var todayYear = today.getFullYear();
      var todayMonth = today.getMonth()+1;
      var todayDate = today.getDate();
      var todayHour = today.getHours();
      var todayMinute = today.getMinutes();
      var todaySecond = today.getSeconds();
      /* Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)
      year - 作为date对象的年份，为4位年份值
      month - 0-11之间的整数，做为date对象的月份
      day - 1-31之间的整数，做为date对象的天数
      hours - 0(午夜24点)-23之间的整数，做为date对象的小时数
      minutes - 0-59之间的整数，做为date对象的分钟数
      seconds - 0-59之间的整数，做为date对象的秒数
      microseconds - 0-999之间的整数，做为date对象的毫秒数 */
      var t1 = Date.UTC(2023,04,23,00,00,00); //北京时间2018-2-13 00:00:00
      var t2 = Date.UTC(todayYear,todayMonth,todayDate,todayHour,todayMinute,todaySecond);
      var diff = t2-t1;
      var diffYears = Math.floor(diff/years);
      var diffDays = Math.floor((diff/days)-diffYears*365);
      var diffHours = Math.floor((diff-(diffYears*365+diffDays)*days)/hours);
      var diffMinutes = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours)/minutes);
      var diffSeconds = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours-diffMinutes*minutes)/seconds);
      /*document.getElementById("sitetime").innerHTML=" 已运行"+/*diffYears+" 年 "+*/diffDays+" 天 "+diffHours+" 小时 "+diffMinutes+" 分钟 "+diffSeconds+" 秒";
      document.getElementById("sitetime").innerHTML=" 已運行"+diffYears+" 年 "+diffDays+" 天 ";
    }/*因为建站时间还没有一年，就将之注释掉了。需要的可以取消*/
    siteTime();
  </script>
  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        if (!window.MathJax) {
          window.MathJax = {
            tex    : {
              inlineMath: { '[+]': [['$', '$']] }
            },
            loader : {
              load: ['ui/lazy']
            },
            options: {
              renderActions: {
                insertedScript: [200, () => {
                  document.querySelectorAll('mjx-container').forEach(node => {
                    let target = node.parentNode;
                    if (target.nodeName.toLowerCase() === 'li') {
                      target.parentNode.classList.add('has-jax');
                    }
                  });
                }, '', false]
              }
            }
          };
        } else {
          MathJax.startup.document.state(0);
          MathJax.texReset();
          MathJax.typeset();
          MathJax.typesetPromise();
        }

        Fluid.events.registerRefreshCallback(function() {
          if ('MathJax' in window && MathJax.startup.document && typeof MathJax.startup.document.state === 'function') {
            MathJax.startup.document.state(0);
            MathJax.texReset();
            MathJax.typeset();
            MathJax.typesetPromise();
          }
        });
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
