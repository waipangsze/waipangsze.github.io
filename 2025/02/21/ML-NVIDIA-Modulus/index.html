

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=light>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="wpsze">
  <meta name="keywords" content="">
  
    <meta name="description" content="NVIDIA Modulus Modulus is an open source deep-learning framework for building, training, and fine-tuning deep learning models using state-of-the-art Physics-ML methods. Whether you are exploring the u">
<meta property="og:type" content="article">
<meta property="og:title" content="ML | NVIDIA Modulus">
<meta property="og:url" content="https://waipangsze.github.io/2025/02/21/ML-NVIDIA-Modulus/index.html">
<meta property="og:site_name" content="wpsze">
<meta property="og:description" content="NVIDIA Modulus Modulus is an open source deep-learning framework for building, training, and fine-tuning deep learning models using state-of-the-art Physics-ML methods. Whether you are exploring the u">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.imgur.com/lZyIffp.png">
<meta property="article:published_time" content="2025-02-21T09:57:00.000Z">
<meta property="article:modified_time" content="2025-03-06T06:59:56.266Z">
<meta property="article:author" content="wpsze">
<meta property="article:tag" content="PINN">
<meta property="article:tag" content="AI">
<meta property="article:tag" content="DeepONet">
<meta property="article:tag" content="ML">
<meta property="article:tag" content="NWP">
<meta property="article:tag" content="WRF">
<meta property="article:tag" content="MPAS">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://i.imgur.com/lZyIffp.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>ML | NVIDIA Modulus - wpsze</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"waipangsze.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":{"measurement_id":"F7MK-FcxSomhtc1N3hIUDA"},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  
    <!-- Google tag (gtag.js) -->
    <script async>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript("https://www.googletagmanager.com/gtag/js?id=F7MK-FcxSomhtc1N3hIUDA", function() {
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag('js', new Date());
          gtag('config', 'F7MK-FcxSomhtc1N3hIUDA');
        });
      }
    </script>
  

  

  

  



  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>wpsze</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/" target="_self">
                <i class="iconfont icon-link-fill"></i>
                <span>Links</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/bookmark/" target="_self">
                <i class="iconfont icon-bookmark"></i>
                <span>Bookmarks</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-books"></i>
                <span>Docs</span>
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Physics/" target="_self">
                    <i class="iconfont icon-plan"></i>
                    <span>Physics</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Maths/" target="_self">
                    <i class="iconfont icon-plan"></i>
                    <span>Maths</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/CFD/" target="_self">
                    <i class="iconfont icon-plan"></i>
                    <span>CFD</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/ML/" target="_self">
                    <i class="iconfont icon-plan"></i>
                    <span>ML</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/Meteorology/" target="_self">
                    <i class="iconfont icon-plan"></i>
                    <span>Meteorology</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/MPAS/" target="_self">
                    <i class="iconfont icon-plan"></i>
                    <span>MPAS</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/PALM/" target="_self">
                    <i class="iconfont icon-plan"></i>
                    <span>PALM</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/monitor/" target="_self">
                    
                    <span>Real Time Monitoring</span>
                  </a>
                
              </div>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>About Me</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://i.imgur.com/lZyIffp.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="ML | NVIDIA Modulus"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-02-21 17:57" pubdate>
          February 21, 2025 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          390 words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          4 mins
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> views
        </span>
        

      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">ML | NVIDIA Modulus</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="nvidia-modulus">NVIDIA Modulus</h1>
<p>Modulus is an open source deep-learning framework for building, training, and fine-tuning deep learning models using state-of-the-art <strong>Physics-ML methods</strong>.</p>
<p>Whether you are exploring the use of Neural operators like <strong>Fourier Neural Operators</strong> or interested in <strong>Physics informed Neural Networks</strong> or a hybrid approach in between, Modulus provides you with the optimized stack that will enable you to train your models at real world scale.</p>
<p>Modulus code is open source and packaged in a modular fashion into two repos - <strong>Modulus Core</strong> and <strong>Modulus Sym</strong>.</p>
<ul>
<li><strong>Modulus Core</strong> provides a pytorch like experience for those proficient with python for AI. It includes all the core algorithms, network architectures and utilities to cover the broad spectrum of physics-constrained and data-driven workflows to suit the diversity of use cases in the science and engineering disciplines.</li>
<li><strong>Modulus Symbolic (Modulus Sym)</strong> provides pythonic APIs, algorithms and utilities to be used with Modulus core, to explicitly physics inform the model training. This includes <strong>symbolic APIs for PDEs, domain sampling and PDE-based residuals</strong>. It also provides higher level abstraction to compose a training loop from specification of the <strong>geometry, PDEs and constraints like boundary conditions using simple symbolic APIs</strong>.</li>
</ul>
<p>We also package the entire Modulus source in a single container image to simplify the ease of use and is freely available on NGC. The container does not include the reference applications due to their size and we recommend you to download the examples directly from Github source.</p>
<h1 id="modulus-with-docker-image---singularity">Modulus with Docker Image - Singularity</h1>
<p>Once you have installed <code>Singularity</code>, to build and <strong>run Modulus Docker image</strong> with <code>Singularity</code>:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs console">singularity build Modulus.sif docker://nvcr.io/nvidia/modulus/modulus:&lt;tag&gt;<br>singularity run --writable --nv Modulus.sif<br></code></pre></td></tr></table></figure>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/NVIDIA/modulus/releases" class="uri">https://github.com/NVIDIA/modulus/releases</a></li>
<li><strong>tag</strong>
<ul>
<li><a target="_blank" rel="noopener" href="https://catalog.ngc.nvidia.com/orgs/nvidia/teams/modulus/containers/modulus/tags" class="uri">https://catalog.ngc.nvidia.com/orgs/nvidia/teams/modulus/containers/modulus/tags</a></li>
<li>up to 24.12 (2025-02-21)</li>
<li>consider <code>singularity build Modulus.sif docker://nvcr.io/nvidia/modulus/modulus:23.08</code>
<ul>
<li>10/04/2023 2:35 AM, 11.24 GB, 1 Architecture</li>
<li><code>9.5G Feb 21 17:19 Modulus.sif</code></li>
</ul></li>
</ul></li>
</ul>
<p>But,</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code"> $ singularity run --writable --nv Modulus.sif</span><br>INFO:    Could not find any nv files on this host!<br><span class="hljs-symbol">WARNING: </span>Could not find any nv libraries on this host!<br><span class="hljs-symbol">WARNING: </span>You may need to manually edit /home/wpsze/micromamba/envs/singularity/etc/singularity/nvliblist.conf<br>INFO:    Converting SIF file to temporary sandbox...<br><span class="hljs-symbol">WARNING: </span>Skipping mount /etc/localtime [binds]: /etc/localtime doesn&#x27;t exist in container<br><span class="hljs-symbol">WARNING: </span>By using --writable, Singularity can&#x27;t create /HOME destination automatically without overlay or underlay<br>INFO:    Cleaning up image...<br>FATAL:   container creation failed: mount /home/wpsze/micromamba/envs/singularity/var/singularity/mnt/session/HOME-&gt;/HOME error: while mounting /home/wpsze/micromamba/envs/singularity/var/singularity/mnt/session/HOME: destination /HOME doesn&#x27;t exist in container<br></code></pre></td></tr></table></figure>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.nas.nasa.gov/hecc/support/kb/running-a-singularity-container-image-on-pleiades_638.html">Running a Singularity Container Image on Pleiades | NASA</a>
<ul>
<li><code>WARNING: By using --writable, Singularity can't create /homeX destination ......</code></li>
<li><strong>Note</strong>: If you encounter the following warning message, <code>cd</code> to <code>your_image_sandbox</code> and use the <code>mkdir</code> command to create <code>homeX</code> before you retry the commands above. (The X in <code>homeX</code> represents the actual value (X=1-7) of your $HOME directory on Pleiades.)</li>
</ul></li>
</ul>
<h2 id="can-modulus-run-on-cpu">Can Modulus run on CPU?</h2>
<ul>
<li>Modulus is built on top of PyTorch, which supports both CPU and GPU execution. By default, Modulus will attempt to use a GPU if available, but it can fall back to CPU execution if no GPU is detected or if explicitly configured.</li>
<li>Running on a CPU is feasible for smaller models or prototyping, but large-scale training or complex simulations may be impractical due to performance constraints.</li>
</ul>
<p>By default, the Modulus container is optimized for GPU use and assumes CUDA availability. To run it on CPU:</p>
<ul>
<li>Avoid passing GPU resources to Singularity (e.g., no <code>--nv</code> flag).</li>
<li>Launch the container interactively or with a script.</li>
</ul>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">$ singularity <span class="hljs-built_in">run</span> Modulus.sif<br></code></pre></td></tr></table></figure>
<p>and, <strong>Importantly</strong>, add on <code>conf/config.yaml</code></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">device:</span> <span class="hljs-string">cpu</span><br><span class="hljs-attr">cuda_graphs:</span> <span class="hljs-literal">False</span><br></code></pre></td></tr></table></figure>
<p>like, on <code>three_fin_2d/heat_sink</code> case,</p>
<ul>
<li>$ cat /home/wpsze/ML/NVIDIA-Modulus/modulus-sym/examples/three_fin_2d/conf/config.yaml</li>
</ul>

    <div class="fold">
      <div class="fold-title fold-info collapsed" data-toggle="collapse" href="#collapse-05eef982" role="button" aria-expanded="false" aria-controls="collapse-05eef982">
        <div class="fold-arrow">▶</div>config.yaml
      </div>
      <div class="fold-collapse collapse" id="collapse-05eef982">
        <div class="fold-content">
          <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># SPDX-FileCopyrightText: Copyright (c) 2023 - 2024 NVIDIA CORPORATION &amp; AFFILIATES.</span><br><span class="hljs-comment"># SPDX-FileCopyrightText: All rights reserved.</span><br><span class="hljs-comment"># SPDX-License-Identifier: Apache-2.0</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span><br><span class="hljs-comment"># you may not use this file except in compliance with the License.</span><br><span class="hljs-comment"># You may obtain a copy of the License at</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#     http://www.apache.org/licenses/LICENSE-2.0</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Unless required by applicable law or agreed to in writing, software</span><br><span class="hljs-comment"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span><br><span class="hljs-comment"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class="hljs-comment"># See the License for the specific language governing permissions and</span><br><span class="hljs-comment"># limitations under the License.</span><br><br><span class="hljs-attr">defaults :</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">modulus_default</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">arch:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">fully_connected</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">optimizer :</span> <span class="hljs-string">adam</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">scheduler :</span> <span class="hljs-string">tf_exponential_lr</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-attr">loss :</span> <span class="hljs-string">sum</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">_self_</span><br><br><span class="hljs-attr">jit:</span> <span class="hljs-literal">false</span><br><br><span class="hljs-attr">device:</span> <span class="hljs-string">cpu</span><br><span class="hljs-attr">cuda_graphs:</span> <span class="hljs-literal">False</span><br><br><span class="hljs-attr">scheduler:</span><br>  <span class="hljs-attr">decay_rate:</span> <span class="hljs-number">0.95</span><br>  <span class="hljs-attr">decay_steps:</span> <span class="hljs-number">5000</span><br><br><span class="hljs-attr">training:</span> <br>  <span class="hljs-attr">rec_validation_freq:</span> <span class="hljs-number">1000</span><br>  <span class="hljs-attr">rec_inference_freq:</span> <span class="hljs-number">1000</span><br>  <span class="hljs-attr">rec_monitor_freq:</span> <span class="hljs-number">1000</span><br>  <span class="hljs-attr">rec_constraint_freq:</span> <span class="hljs-number">2000</span><br>  <span class="hljs-attr">max_steps:</span> <span class="hljs-number">500000</span><br><br><span class="hljs-attr">batch_size:</span><br>  <span class="hljs-attr">inlet:</span> <span class="hljs-number">64</span><br>  <span class="hljs-attr">outlet:</span> <span class="hljs-number">64</span><br>  <span class="hljs-attr">hs_wall:</span> <span class="hljs-number">500</span><br>  <span class="hljs-attr">channel_wall:</span> <span class="hljs-number">2500</span><br>  <span class="hljs-attr">interior_flow:</span> <span class="hljs-number">4800</span><br>  <span class="hljs-attr">interior_heat:</span> <span class="hljs-number">4800</span><br>  <span class="hljs-attr">integral_continuity:</span> <span class="hljs-number">128</span><br>  <span class="hljs-attr">num_integral_continuity:</span> <span class="hljs-number">4</span><br></code></pre></td></tr></table></figure>
        </div>
      </div>
    </div>
<h2 id="bug">Bug</h2>
<h3 id="root-filesystem-extraction-failed-failed-to-copy-content-in-staging-file-write-tmprootfs">root filesystem extraction failed: failed to copy content in staging file: write /tmp/rootfs</h3>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/apptainer/singularity/issues/5711">root filesystem extraction failed: command error: while getting library dependencies: exit status 127</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.sylabs.io/guides/3.7/user-guide/build_env.html#temporary-folders">Temporary Folders</a>
<ul>
<li>The location for temporary directories defaults to <code>/tmp</code>. Singularity will also respect the environment variable <code>TMPDIR</code>, and both of these locations can be overridden by setting the environment variable <code>SINGULARITY_TMPDIR</code>.</li>
<li>The temporary directory used during a build must be on a filesystem that has <strong>enough space to hold the entire container image</strong>, uncompressed, including any temporary files that are created and later removed during the build.</li>
<li>You may need to set <code>SINGULARITY_TMPDIR</code> when building a large container on a system which has a small <code>/tmp</code> filesystem.</li>
<li><code>$ ls -a /tmp</code></li>
<li>cleanup: <code>rm -r rootfs*</code></li>
</ul></li>
<li>try to add
<ul>
<li><code>export SINGULARITY_TMPDIR="/home/wpsze/ML/NVIDIA-Modulus/singularity_tmp"</code></li>
<li><code>-B $SINGULARITY_TMPDIR:/tmp</code></li>
</ul></li>
</ul>
<h2 id="running-examples">Running Examples</h2>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs console">223M	./modulus<br>9.5G	./Modulus.sif<br>926M	./modulus-sym<br></code></pre></td></tr></table></figure>
<h3 id="modulus-examples">Modulus Examples</h3>
<p>Clone the Modulus repository in your working directory using:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs console">git clone https://github.com/NVIDIA/modulus.git<br></code></pre></td></tr></table></figure>
<p>To verify the examples run correctly, run these commands:</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs console">cd ./modulus/examples/cfd/darcy_fno/<br>pip install warp-lang<br>python train_fno_darcy.py<br></code></pre></td></tr></table></figure>
<p>If you see the <code>outputs/</code> directory created after the execution of the command (~5 min), the installation is successful.</p>
<h3 id="modulus-sym-examples">Modulus Sym examples</h3>
<ul>
<li>The modulus-sym repository has <strong>Git LFS</strong> enabled. You will need to have <strong>Git LFS</strong> installed for the clone to work correctly.</li>
</ul>
<p>Clone the Modulus Sym repository in your working directory using:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://github.com/NVIDIA/modulus-sym.git<br></code></pre></td></tr></table></figure>
<p>To verify the examples run correctly, run these commands:</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">cd</span> ./modulus-sym/examples/helmholtz/<br><span class="hljs-keyword">python</span> helmholtz.<span class="hljs-keyword">py</span><br></code></pre></td></tr></table></figure>
<p>If you see the <code>outputs/</code> directory created after the execution of the command (~5 min), the installation is successful.</p>
<h4 id="examples">Examples</h4>
<ol type="1">
<li><a target="_blank" rel="noopener" href="https://docs.nvidia.com/deeplearning/modulus/modulus-sym-v120/user_guide/foundational/scalar_transport.html">Scalar Transport: 2D Advection Diffusion</a>
<ol type="1">
<li><code>examples/three_fin_2d/heat_sink.py</code></li>
</ol></li>
<li><a target="_blank" rel="noopener" href="https://docs.nvidia.com/deeplearning/modulus/modulus-sym/user_guide/advanced/2d_heat_transfer.html">Heat Transfer with High Thermal Conductivity | 2d_heat_transfer</a>
<ol type="1">
<li><code>examples/limerock/limerock_hFTB</code></li>
</ol></li>
<li><a target="_blank" rel="noopener" href="https://docs.nvidia.com/deeplearning/modulus/modulus-sym/user_guide/advanced/parametrized_simulations.html">Parameterized 3D Heat Sink</a></li>
</ol>
<h2 id="post-processing-in-modulus">Post Processing in Modulus</h2>
<ol type="1">
<li><a target="_blank" rel="noopener" href="https://docs.nvidia.com/deeplearning/modulus/modulus-v2209/user_guide/features/post_processing.html">Post Processing in Modulus</a>
<ol type="1">
<li>var_to_polyvtk(save_var, "./test_file")</li>
<li>grid_to_vtk(save_var, "./test_file", batch_index=1)</li>
</ol></li>
<li><a target="_blank" rel="noopener" href="https://docs.nvidia.com/deeplearning/modulus/modulus-core/tutorials/simple_training_example.html">Simple Training and Inference recipe</a></li>
</ol>
<h2 id="load-model">Load model</h2>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">export</span> SINGULARITY_BIND=<span class="hljs-string">&quot;/home/wpsze/ML/NVIDIA-Modulus&quot;</span><br>singularity shell Modulus.sif<br></code></pre></td></tr></table></figure>
<h1 id="references">References</h1>
<ol type="1">
<li><a target="_blank" rel="noopener" href="https://docs.nvidia.com/deeplearning/modulus/getting-started/index.html">NVIDIA Modulus Getting Started</a></li>
<li><a target="_blank" rel="noopener" href="https://indico.ihep.ac.cn/event/17357/sessions/3811/attachments/62339/72133/AI%20For%20Science%20Framework%20modulus.pdf">AI FOR SCIENCE FRAMEWORK: MODULUS</a></li>
</ol>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/ML/" class="category-chain-item">ML</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/PINN/" class="print-no-link">#PINN</a>
      
        <a href="/tags/AI/" class="print-no-link">#AI</a>
      
        <a href="/tags/DeepONet/" class="print-no-link">#DeepONet</a>
      
        <a href="/tags/ML/" class="print-no-link">#ML</a>
      
        <a href="/tags/NWP/" class="print-no-link">#NWP</a>
      
        <a href="/tags/WRF/" class="print-no-link">#WRF</a>
      
        <a href="/tags/MPAS/" class="print-no-link">#MPAS</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>ML | NVIDIA Modulus</div>
      <div>https://waipangsze.github.io/2025/02/21/ML-NVIDIA-Modulus/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>wpsze</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>February 21, 2025</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Updated on</div>
          <div>March 6, 2025</div>
        </div>
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/02/26/MPAS-MPAS-Version-8/" title="MPAS | MPAS Version 8">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">MPAS | MPAS Version 8</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/02/20/MPAS-WRF-Atmospheric-radiative-transfer/" title="MPAS | WRF | Atmospheric radiative transfer">
                        <span class="hidden-mobile">MPAS | WRF | Atmospheric radiative transfer</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  





  <script>
  Fluid.utils.createScript('https://lib.baomitu.com/mermaid/8.14.0/mermaid.min.js', function() {
    mermaid.initialize({"theme":"default"});

    Fluid.utils.listenDOMLoaded(function() {
      Fluid.events.registerRefreshCallback(function() {
        if ('mermaid' in window) {
          mermaid.init();
        }
      });
    });
  });
</script>






<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9HL36SZ28R"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-9HL36SZ28R');
</script>

    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">

  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  

  <span id="sitetime"></span>
  <script language=javascript>
    function siteTime(){
      window.setTimeout("siteTime()", 1000);
      var seconds = 1000;
      var minutes = seconds * 60;
      var hours = minutes * 60;
      var days = hours * 24;
      var years = days * 365;
      var today = new Date();
      var todayYear = today.getFullYear();
      var todayMonth = today.getMonth()+1;
      var todayDate = today.getDate();
      var todayHour = today.getHours();
      var todayMinute = today.getMinutes();
      var todaySecond = today.getSeconds();
      /* Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)
      year - 作为date对象的年份，为4位年份值
      month - 0-11之间的整数，做为date对象的月份
      day - 1-31之间的整数，做为date对象的天数
      hours - 0(午夜24点)-23之间的整数，做为date对象的小时数
      minutes - 0-59之间的整数，做为date对象的分钟数
      seconds - 0-59之间的整数，做为date对象的秒数
      microseconds - 0-999之间的整数，做为date对象的毫秒数 */
      var t1 = Date.UTC(2023,04,23,00,00,00); //北京时间2018-2-13 00:00:00
      var t2 = Date.UTC(todayYear,todayMonth,todayDate,todayHour,todayMinute,todaySecond);
      var diff = t2-t1;
      var diffYears = Math.floor(diff/years);
      var diffDays = Math.floor((diff/days)-diffYears*365);
      var diffHours = Math.floor((diff-(diffYears*365+diffDays)*days)/hours);
      var diffMinutes = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours)/minutes);
      var diffSeconds = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours-diffMinutes*minutes)/seconds);
      /*document.getElementById("sitetime").innerHTML=" 已运行"+/*diffYears+" 年 "+*/diffDays+" 天 "+diffHours+" 小时 "+diffMinutes+" 分钟 "+diffSeconds+" 秒";
      document.getElementById("sitetime").innerHTML=" 已運行"+diffYears+" 年 "+diffDays+" 天 ";
    }/*因为建站时间还没有一年，就将之注释掉了。需要的可以取消*/
    siteTime();
  </script>
  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        if (!window.MathJax) {
          window.MathJax = {
            tex    : {
              inlineMath: { '[+]': [['$', '$']] }
            },
            loader : {
              load: ['ui/lazy']
            },
            options: {
              renderActions: {
                insertedScript: [200, () => {
                  document.querySelectorAll('mjx-container').forEach(node => {
                    let target = node.parentNode;
                    if (target.nodeName.toLowerCase() === 'li') {
                      target.parentNode.classList.add('has-jax');
                    }
                  });
                }, '', false]
              }
            }
          };
        } else {
          MathJax.startup.document.state(0);
          MathJax.texReset();
          MathJax.typeset();
          MathJax.typesetPromise();
        }

        Fluid.events.registerRefreshCallback(function() {
          if ('MathJax' in window && MathJax.startup.document && typeof MathJax.startup.document.state === 'function') {
            MathJax.startup.document.state(0);
            MathJax.texReset();
            MathJax.typeset();
            MathJax.typesetPromise();
          }
        });
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
